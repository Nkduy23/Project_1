RewriteEngine On
RewriteBase /

# Skip existing files and directories
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Static files exception (more comprehensive)
RewriteRule \.(css|js|png|jpg|jpeg|gif|svg|webp|ico|woff|woff2|ttf|eot|mp4|webm)$ - [L,NC]

# Specific routes first
RewriteRule ^user/login/?$ /app/views/index.php?page=user&action=login [L,QSA]
RewriteRule ^user/register/?$ /app/views/index.php?page=user&action=register [L,QSA]


RewriteRule ^detail/([0-9]+)/?$ /app/views/index.php?page=detail&id=$1 [L,QSA]

# 3-level URLs: category/type/value
RewriteRule ^([a-z0-9-]+)/([a-z0-9-]+)/([a-z0-9-]+)/?$ /app/views/index.php?page=$1&category=$2&type=$3 [L,QSA,NC]

# 2-level URLs: page/name
RewriteRule ^([a-z0-9-]+)/([a-z0-9-]+)/?$ /app/views/index.php?page=$1&name=$2 [L,QSA,NC]

# 1-level URLs: page
RewriteRule ^([a-z0-9-]+)/?$ /app/views/index.php?page=$1 [L,QSA,NC]

# Fallback to index.php for all other requests
RewriteRule ^ /app/views/index.php [L,QSA]